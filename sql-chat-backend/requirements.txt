# ============================================================================
# OptimaX v6.1 - Locked Dependencies
# ============================================================================
# This file pins EXACT versions for reproducible builds.
# Run: pip install -r requirements.txt
# ============================================================================

# -----------------------------------------------------------------------------
# Core Web Framework
# -----------------------------------------------------------------------------
# FastAPI: High-performance async web framework for REST API endpoints
fastapi==0.104.1
# Uvicorn: ASGI server that runs FastAPI with async support
uvicorn==0.24.0
# Pydantic: Data validation and serialization for request/response models
pydantic==2.8.0

# -----------------------------------------------------------------------------
# LlamaIndex NL-SQL Stack (Groq-Only)
# -----------------------------------------------------------------------------
# IMPORTANT: We do NOT use the llama-index meta-package. It transitively
# installs llama-index-embeddings-openai, llama-index-agent-openai, etc.
# which register OpenAI as the default LLM provider (causing drift).
#
# DEPENDENCY CHAIN (all required — Groq's API is OpenAI-compatible):
#   llama-index-llms-groq
#     → llama-index-llms-openai-like  (Groq class inherits from OpenAILike)
#       → llama-index-llms-openai     (base LLM class)
#         → openai                    (HTTP transport)
#
# We pin the top-level packages; pip resolves the transitive deps.
# -----------------------------------------------------------------------------
# Core: SQLDatabase, NLSQLTableQueryEngine, ReActAgent, Settings
llama-index-core==0.14.5
# Groq adapter (our ONLY LLM provider)
llama-index-llms-groq==0.4.1
# Required transitive deps of llama-index-core
llama-index-instrumentation==0.4.2

# -----------------------------------------------------------------------------
# Database Layer
# -----------------------------------------------------------------------------
# SQLAlchemy: ORM and SQL toolkit, used by LlamaIndex's SQLDatabase
sqlalchemy==2.0.23
# psycopg2-binary: PostgreSQL adapter (binary wheels for easy install)
psycopg2-binary==2.9.9

# -----------------------------------------------------------------------------
# Data Processing
# -----------------------------------------------------------------------------
# Pandas: DataFrame operations for query result processing
pandas==2.1.4

# -----------------------------------------------------------------------------
# Utilities
# -----------------------------------------------------------------------------
# python-dotenv: Load environment variables from .env files
python-dotenv==1.0.0
# sqlparse: SQL parsing for query validation and formatting
sqlparse==0.4.4
# requests: HTTP client for external API calls
requests==2.31.0
# aiohttp: Async HTTP client for non-blocking requests
aiohttp==3.9.1

# -----------------------------------------------------------------------------
# Development (Optional)
# -----------------------------------------------------------------------------
# pytest: Testing framework
pytest>=7.4.0
# httpx: Async HTTP client for testing FastAPI
httpx>=0.25.0
